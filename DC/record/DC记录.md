# DC记录
成员：郭家怡，黄静雯，周沁茗

### 思路

分块编译，解决大规模设计编译时占用内存过大的问题。

1、先将sub-block编译成ddc文件。

2、预编译好的sub-block导入到Synopsys DC，顶层RTL代码使用generate例化多个sub-block。

3、再次编译顶层设计。

### 编译流程

![Untitled](imgs/Untitled.png)

顶层RTL代码：

```verilog
module my_top(
    input wire clk, 
    input wire rst, 
    input wire[31:0] w_data, 
    input wire[11:0] w_addr,
    input wire[11:0] r_addr, 
    output wire[31:0] r_data,
    input wire [29:0] csel);
    genvar i;
    wire [31:0] r_data_array[29:0];
    generate
        for (i = 0; i < 30 ; i = i+1) begin
            array array( //4096个32bit寄存器，存储成ddc供dc调用(约160万门）
                .clk    (clk   ), 
                .rst    (rst & csel[i]  ), 
                .w_data (w_data & {32{csel[i]}}), 
                .w_addr (w_addr & {12{csel[i]}}), 
                .r_addr (r_addr & {12{csel[i]}}), 
                .r_data (r_data_array[i]) );
        end    
    endgenerate
reg [5:0] read_sel;
always@(posedge clk)begin
    case(csel)
    30'b00000_00000_00000_00000_00000_00001: read_sel <= 0;
    30'b00000_00000_00000_00000_00000_00010: read_sel <= 1;
    30'b00000_00000_00000_00000_00000_00100: read_sel <= 2;
    30'b00000_00000_00000_00000_00000_01000: read_sel <= 3;
    30'b00000_00000_00000_00000_00000_10000: read_sel <= 4;
    30'b00000_00000_00000_00000_00001_00000: read_sel <= 5;
    30'b00000_00000_00000_00000_00010_00000: read_sel <= 6;
    30'b00000_00000_00000_00000_00100_00000: read_sel <= 7;
    30'b00000_00000_00000_00000_01000_00000: read_sel <= 8;
    30'b00000_00000_00000_00000_10000_00000: read_sel <= 9;
    
    30'b00000_00000_00000_00001_00000_00000: read_sel <= 10;
    30'b00000_00000_00000_00010_00000_00000: read_sel <= 11;
    30'b00000_00000_00000_00100_00000_00000: read_sel <= 12;
    30'b00000_00000_00000_01000_00000_00000: read_sel <= 13;
    30'b00000_00000_00000_10000_00000_00000: read_sel <= 14;
    30'b00000_00000_00001_00000_00000_00000: read_sel <= 15;
    30'b00000_00000_00010_00000_00000_00000: read_sel <= 16;
    30'b00000_00000_00100_00000_00000_00000: read_sel <= 17;
    30'b00000_00000_01000_00000_00000_00000: read_sel <= 18;
    30'b00000_00000_10000_00000_00000_00000: read_sel <= 19;

    30'b00000_00001_00000_00000_00000_00000: read_sel <= 20;
    30'b00000_00010_00000_00000_00000_00000: read_sel <= 21;
    30'b00000_00100_00000_00000_00000_00000: read_sel <= 22;
    30'b00000_01000_00000_00000_00000_00000: read_sel <= 23;
    30'b00000_10000_00000_00000_00000_00000: read_sel <= 24;
    30'b00001_00000_00000_00000_00000_00000: read_sel <= 25;
    30'b00010_00000_00000_00000_00000_00000: read_sel <= 26;
    30'b00100_00000_00000_00000_00000_00000: read_sel <= 27;
    30'b01000_00000_00000_00000_00000_00000: read_sel <= 28;
    30'b10000_00000_00000_00000_00000_00000: read_sel <= 29;
    endcase
end
    assign r_data = r_data_array[read_sel];
endmodule
```

### 例化10个的综合结果

工艺库：TSMC 90nm，最小标准单元反相器面积0.75

![Untitled](imgs/Untitled%201.png)

门数计算（0.75是单元库中最小反相器的面积）：

$\frac{11889177.25}{0.75} = 15,852,236$.

运行时间：
编译sub-block2h，编译顶层模块4h。
![elapse_time](imgs/pic2.png)
